#!/bin/bash

source .env
export PATH=$PATH:${PWD}/bin
export FABRIC_CFG_PATH=${PWD}

# ---------------------------------------------------------------------------
# Clear screen
# ---------------------------------------------------------------------------
clear

echo 
echo "# ---------------------------------------------------------------------------"
echo "# Command on a node to remove it from the swarm."
echo "# ---------------------------------------------------------------------------"
docker swarm leave -f

echo "# ---------------------------------------------------------------------------"
echo "# Initialize a swarm"
echo "# ---------------------------------------------------------------------------"
docker swarm init 

echo "# ---------------------------------------------------------------------------"
echo "# Create a network"
echo "# ---------------------------------------------------------------------------"
docker network create --driver overlay --subnet=10.200.1.0/24 --attachable "$DOCKER_NETWORK_NAME"
